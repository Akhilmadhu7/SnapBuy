{% extends 'userside/userbase.html' %}

{% load static %}



{% block contentblock %}
    <div class="wrapper">

        

       

        <!-- Start page content -->
        <section id="page-content" class="page-wrapper section">

            <!-- SHOP SECTION START -->
            <div class="shop-section mb-80">
                <div class="container">
                    <div class="row">
                       


                        <div class="col-lg-12 ms-5">
                            <!-- Tab panes -->
                            <div class="tab-content">
                               
                               
                                
                                <!-- order-complete start -->
                                <div id="order-complete">
                                    <div class="order-complete-content box-shadow">
                                        <div class="thank-you p-30 text-center">
                                            <h6 class="text-black-5 mb-0">Thank you. Your order has been received.</h6>
                                        </div>
                                      
                                        
                                        
                                        
                                        <div class="row">
                                            <!-- our order -->
                                            
                                            <div class="card">
                                                <div class="card-body">
                                                  <div class="container mb-5 mt-3">
                                                    <div class="row d-flex align-items-baseline">
                                                      <div class="col-xl-9">
                                                        <p style="color: #7e8d9f;font-size: 20px;">Invoice >> <strong>ID: #{{o.id}}</strong></p>
                                                      </div>
                                                      <div class="col-xl-3 float-end">
                                                        <a onclick="print_current_page()" href="" class="btn btn-light text-capitalize border-0" data-mdb-ripple-color="dark"><i
                                                            class="fas fa-print text-primary"></i> Print</a>
                                                        <a class="btn btn-light text-capitalize" data-mdb-ripple-color="dark"><i
                                                            class="far fa-file-pdf text-danger"></i> Export</a>
                                                      </div>
                                                      <hr>
                                                    </div>
                                              
                                                    <div id="printPage" class="container">
                                                      <!-- <div class="col-md-12">
                                                        <div class="text-center">
                                                          <i class="fab fa-mdb fa-4x ms-0" style="color:#5d9fc5 ;"></i>
                                                          <p class="pt-0">MDBootstrap.com</p>
                                                        </div>
                                              
                                                      </div> -->
                                              
                                              
                                                      <div class="row">
                                                        <div class="col-xl-8">
                                                          <ul class="list-unstyled">
                                                            <li class="text-muted">To: <span style="color:#ee780a ;">{{orders.customername}}</span></li>
                                                            <li class="text-muted">{{orders.address}}</li>
                                                            <li class="text-muted">{{orders.pincode}}, {{orders.country}}</li>
                                                            <li class="text-muted"><i class="fas fa-phone"></i> {{orders.user.phone_number}}</li>
                                                          </ul>
                                                        </div>
                                                        <div class="col-xl-4">
                                                          <p class="text-muted">Invoice</p>
                                                          <ul class="list-unstyled">
                                                            <li class="text-muted"><i class="fas fa-circle" style="color:#84B0CA ;"></i> <span
                                                                class="fw-bold">ID:</span>#{{orders.id}}</li>
                                                            <li class="text-muted"><i class="fas fa-circle" style="color:#84B0CA ;"></i> <span
                                                                class="fw-bold">Purchased Date: </span>{{orders.created_at}}</li>
                                                            <li class="text-muted"><i class="fas fa-circle" style="color:#84B0CA ;"></i> <span
                                                                class="me-1 fw-bold">Status:</span><span class="badge bg-warning text-black fw-bold">
                                                                {{o.status}}</span></li>
                                                          </ul>
                                                        </div>
                                                      </div>
                                              
                                                      <div class="row my-2 mx-1 justify-content-center">
                                                        <table class="table table-striped table-borderless">
                                                          <thead style="background-color:#f6810b ;" class="text-white">
                                                            <tr>
                                                              <th scope="col">#</th>
                                                              <th scope="col">Product</th>
                                                              <th scope="col">Qty</th>
                                                              <th scope="col">Product Informations </th>
                                                              <th scope="col">Unit Price</th>
                                                            </tr>
                                                          </thead>
                                                          <tbody>
                                                            {% for o in order %}
                                                            <tr>
                                                              <th scope="row">1</th>
                                                              <td>{{o.product.product_name}}</td>
                                                              <td>{{o.quantity}}</td>
                                                              <td>{{o.product.color}} &nbsp; &nbsp;{{o.product.ram}} &nbsp; &nbsp; {{o.product.storage}}</td>
                                                              <td>Rs. {{o.price}}</td>
                                                            </tr>
                                                            {% endfor %}
                                                           
                                                          </tbody>
                                              
                                                        </table>
                                                      </div>
                                                      
                                                      {% if orders %}
                                                          
                                                      <div class="row">
                                                        <div class="col-xl-8">
                                                          <p class="ms-3">Add additional notes and payment information</p>
                                                          <br>
                                                          <p class="fw-bold text-muted"><span class="text-black me-4">Payment Mode</span>{{orders.paymentmode}}</p>
                                              
                                                        </div>
                                                        <div class="col-xl-3">
                                                          <ul class="list-unstyled">
                                                            <li class="text-muted ms-3"><span class="text-black me-4">Discount:</span>Rs. {{discount}}</li>
                                                            <li class="text-muted ms-3"><span class="text-black me-4">Coupon Offer:</span>Rs. {{coupon}}</li>
                                                            <li class="text-muted ms-3"><span class="text-black me-4">SubTotal:</span>Rs. {{orders.total_price}}</li>
                                                            <li class="text-muted ms-3 mt-2"><span class="text-black me-4">Tax:</span>Rs. {{orders.tax}}</li>
                                                            <li class="text-muted ms-3 mt-2"><span class="text-black me-4">Delivery:</span>Rs. {{orders.shippping}}</li>
                                                          </ul>
                                                          <p class="text-black float-start"><span class="text-black me-3"> Total Amount:</span><span
                                                              style="font-size: 25px;">Rs. {{orders.grandtotal}}</span></p>
                                                        </div>
                                                      </div>
                                                      {% endif %}
                                                      <hr>
                                                      <div class="row">
                                                        <div class="col-xl-10">
                                                          <p>Thank you for your purchase</p>
                                                        </div>
                                                        
                                                      </div>
                                                      
                                                    </div>
                                                  </div>
                                                </div>
                                              </div> 
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-2 mt-5">
                                  <a href="{% url 'userindex' %}">
                                <button type="button" class="btn btn-primary text-capitalize"
                                  style="background-color:#f6810b ;">Home</button>
                              </a>
                              </div>
                                <!-- order-complete end -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- <div>
                <div>
                    <a href="{% url 'userindex' %}">
                        <button></button>
                    </a>
                </div>
            </div> -->
            <!-- SHOP SECTION END -->             

        </section>
        <!-- End page content -->

        
    </div>
    <!-- Body main wrapper end -->
    {% endblock %}

    
    {% block scripts %}

    <script>
       function print_current_page(){

         var divContents=document.getElementById("printPage").innerHTML;

         var printWindow=window.open('','','height=200,width=400');
          printWindow.document.write('<link rel="stylesheet"href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">'); 
          printWindow.document.write('<html><head><title>Invoice</title>');
          printWindow.document.write('</head><body>'); 
          printWindow.document.write(divContents);
          printWindow.document.write('</body></html>');
          printWindow.document.close();
          printWindow.print();
            

       }
    </script>

  
      
    {% endblock scripts %}
      
